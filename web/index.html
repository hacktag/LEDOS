<!DOCTYPE html><html><head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><title></title><style>div,nav *{position:relative}i,nav .a:after,p{position:absolute}input,nav *{font-size:15px;background:#fff}nav *,p{text-align:center}body{background:-webkit-linear-gradient(90deg,#485563 10%,#29323c 90%);background:-moz-linear-gradient(90deg,#485563 10%,#29323c 90%);background:-ms-linear-gradient(90deg,#485563 10%,#29323c 90%);background:-o-linear-gradient(90deg,#485563 10%,#29323c 90%);background:linear-gradient(90deg,#485563 10%,#29323c 90%);font-family:"Helvetica Neue",Helvetica,Arial,sans-serif;font-size:20px;color:#fff}div{width:100%;margin:0 auto}h1{font-size:32px;margin:10px 0}h2{font-size:24px;margin:5px 0}nav{overflow:hidden;padding:3px;margin:0}nav *{float:left;width:23.5%;height:15px;padding:10px 0;margin:0 0 10px 2%;border-radius:3px;cursor:pointer;color:#000}#cp,input,p{width:100%}nav :nth-child(4n+1){margin-left:0}nav .a:after{content:'';display:block;top:-2px;bottom:-2px;left:-2px;right:-2px;border-radius:7px;border:2px solid #7BC3FF}i,p{left:0}#cp{clear:both;display:block;height:200px;cursor:crosshair}.hdn,i{display:none}input{display:block;position:relative;margin:0 0 10px;padding:10px;border:none;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;-o-box-sizing:border-box;-ms-box-sizing:border-box;box-sizing:border-box;outline:0}input:focus{padding:8px;border-radius:3px;border:2px solid #7BC3FF}#set{cursor:pointer}i{top:0;right:0;bottom:0;background:rgba(0,0,0,.7)}p{top:50%;margin-top:-12px;color:#fff}@media only screen and (min-width:641px){div{width:640px}h1{font-size:48px;margin:30px 0}h2{font-size:36px;margin:10px 0}nav *{height:15px;padding:20px 0}nav .a:after{top:-3px;right:-3px;bottom:-3px;left:-3px;border-width:3px}input{padding:20px 10px;margin:0 0 20px}input:focus{padding:17px 7px;border-width:3px}}</style><body><div><h1></h1><h2>Colors</h2><nav id=c><a id=c1 class=a></a> <a id=c2></a> <a id=c3></a> <a id=c4></a> <a id=c5></a> <a id=c6></a> <a id=c7></a> <a id=c8></a></nav><canvas id=cp></canvas><h2>Mode</h2><nav><a id=m1>Static Color</a> <a id=m2>3 Color Fade</a> <a id=m3>Data Stream</a> <a id=m4>Full Fade</a></nav><h2 id=set>Settings</h2><form class=hdn action=/set method=post><b>Device name</b> <input name=name value="Veronica's Lamp"> <b>Network name</b> <input name=network value=UTPL> <b>Device password</b> <input type=password name=password> <input type=submit value=Submit></form></div><i><p></p></i><script>function n(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState)if(200===e.status){document.querySelector("i").style.display="none";var t=JSON.parse(e.responseText);for(document.querySelector("title").innerHTML=t.n,document.querySelector("h1").innerHTML=t.n,b=0;b<t.c.length;++b)document.querySelector("#c"+(b+1)).style.background="#"+t.c[b];document.getElementById("m"+t.m).className="a"}else document.querySelector("i p").innerHTML="Unable to process data from module. Check logs.",document.querySelector("i").style.display="inline-block",console.log(e.status,e.responseText)},e.open("GET","/status",!0),e.send(null)}function p(e,t){if(g){var n,l;l=a.getBoundingClientRect(),t?(n=e.changedTouches[0].clientX-l.left,l=e.changedTouches[0].clientY-l.top):(n=e.clientX-l.left,l=e.clientY-l.top),h=n/a.clientWidth*360,k=l/a.clientHeight*100,document.querySelector("#c .a").style.background="hsl("+h+", 100%, "+k+"%)",e.preventDefault()}}function r(e){return g=!0,t=document.querySelector("#c .a").style.background,p(e),e.preventDefault(),!1}function u(e){if(g){g=null,clearInterval(q);var t=new XMLHttpRequest,l=new FormData;l.append("h",h/360),l.append("s",1),l.append("l",k/100),t.open("POST","/color/hsl",!0),t.send(l),q=setInterval(n,5e3),e.preventDefault()}}var f,b,q,a,h,k,l,m;for(f=document.querySelectorAll("nav a"),b=0;b<f.length;++b)f[b].onclick=function(){this.parentNode.querySelector(".a").className="",this.className="a"};for(b=1;5>b;++b)document.getElementById("m"+b).onclick=function(){var e=b;return function(){var t=new XMLHttpRequest;t.open("POST","/mode",!0),t.send("m="+e),this.parentNode.querySelector(".a").className="",this.className="a"}}();for(document.querySelector("#set").onclick=function(){document.querySelector("form").classList.toggle("hdn"),window.location="#set"},n(),q=setInterval(n,5e3),a=document.getElementById("cp"),f=a.getContext("2d"),a.width=a.clientWidth,a.height=a.clientHeight,m=0;m<=a.clientHeight;++m)for(l=0;l<a.clientWidth;++l)h=l/a.clientWidth*360,k=m/a.clientHeight*100,f.fillStyle="hsl("+h+", 100%, "+k+"%)",f.fillRect(l,m,1,1);var g=null,t;a.onmousedown=r,a.onmousemove=p,document.onmouseup=u,a.addEventListener("touchstart",r,!1),a.addEventListener("touchmove",function(e){p(e,!0)},!1),a.addEventListener("touchend",u,!1),a.addEventListener("touchcancel",function(){g=null,document.querySelector("#c .a").style.background=t},!1);</script>
